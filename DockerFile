# ---- 1. Start with full Ubuntu so all languages can be installed ----
    FROM ubuntu:22.04

    # ---- 2. Prevent interactive prompts during apt install ----
    ENV DEBIAN_FRONTEND=noninteractive
    
    # ---- 3. Update + Install core tools ----
    RUN apt-get update && apt-get install -y \
        git \
        curl \
        wget \
        build-essential \
        software-properties-common \
        unzip \
        nano \
        pkg-config
    
    # ---- 4. Install Node.js LTS ----
    RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && \
        apt-get install -y nodejs
    
    # ---- 5. Install Python3 + pip ----
    RUN apt-get install -y python3 python3-pip
    
    # ---- 6. Install OpenJDK (Java) ----
    RUN apt-get install -y openjdk-17-jdk
    
    # ---- 7. Install Go ----
    RUN wget https://go.dev/dl/go1.22.0.linux-amd64.tar.gz && \
        tar -C /usr/local -xzf go1.22.0.linux-amd64.tar.gz
    ENV PATH=$PATH:/usr/local/go/bin
    
    # ---- 8. Install PHP ----
    RUN apt-get install -y php php-cli php-mbstring php-xml php-curl
    
    # ---- 9. Install Rust (Rustup) ----
    RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
    ENV PATH="/root/.cargo/bin:${PATH}"
    
    # ---- 10. Install .NET SDK ----
    RUN wget https://packages.microsoft.com/config/ubuntu/22.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb && \
        dpkg -i packages-microsoft-prod.deb && \
        apt-get update && \
        apt-get install -y dotnet-sdk-7.0
    
    # ---- 11. Install C/C++ toolchain (gcc, g++) ----
    RUN apt-get install -y gcc g++
    
    # ---- 12. Install global npm tools (optional)
    RUN npm install -g yarn pnpm typescript
    
    # ---- 13. Setup your app folder ----
    WORKDIR /usr/src/app
    COPY package.json package-lock.json* ./
    RUN npm install
    
    # Copy rest of the app
    COPY . .
    
    # ---- 14. Expose port Railway uses ----
    EXPOSE 3000
    
    CMD ["npm", "start"]
    